(()=>{"use strict";function e(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",n)}function t(e,t){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",n)}var n=function(e,n){if("Escape"===e.key){var o=document.querySelector(".popup_is-opened");o&&t(o)}};function o(e,n){e.querySelector(n.selectors.closeButton).addEventListener("click",(function(){t(e)})),e.addEventListener("click",(function(n){n.target===e&&t(e)}))}var r=document.getElementById("card-template"),c=document.querySelector(".places__list"),i=document.querySelector(".popup_type_image"),l=i.querySelector(".popup__image"),u=i.querySelector(".popup__caption"),p=document.querySelector(".popup_type_edit"),s=document.querySelector(".profile__edit-button"),a=document.querySelector("form[name=edit-profile]"),d=a.querySelector(".popup__input_type_name"),m=a.querySelector(".popup__input_type_description"),_=document.querySelector(".profile__title"),y=document.querySelector(".profile__description"),v=document.querySelector(".popup_type_new-card"),f=document.querySelector(".profile__add-button"),k=document.querySelector("form[name=new-place]"),q=k.querySelector(".popup__input_type_card-name"),S=k.querySelector(".popup__input_type_url"),g={onOpenImage:function(t){u.textContent=t.name,l.src=t.link,l.alt=t.name,e(i)},onDelete:function(e){e.remove()},onLike:function(e,t){e.classList.toggle(t.classes.likeActiveButton)},cardTemplate:r,selectors:{card:".card",image:".card__image",title:".card__title",deleteButton:".card__delete-button",likeButton:".card__like-button"},classes:{likeActiveButton:"card__like-button_is-active"}},L={selectors:{closeButton:".popup__close"}};function E(e){var t=function(e,t){var n=t.cardTemplate.content.cloneNode(!0).querySelector(t.selectors.card),o=n.querySelector(t.selectors.image),r=n.querySelector(t.selectors.title),c=n.querySelector(t.selectors.deleteButton),i=n.querySelector(t.selectors.likeButton);return o.src=e.link,o.alt=e.name,r.textContent=e.name,c.addEventListener("click",(function(){t.onDelete(n)})),i.addEventListener("click",(function(){t.onLike(i,t)})),o.addEventListener("click",(function(){t.onOpenImage(e)})),n}(e,g);c.prepend(t)}o(i,L),o(v,L),o(p,L),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].reverse().forEach(E),s.addEventListener("click",(function(){d.value=_.textContent,m.value=y.textContent,e(p)})),f.addEventListener("click",(function(){e(v)})),k.addEventListener("submit",(function(e){e.preventDefault(),E({name:q.value.trim(),link:S.value.trim()}),t(v),k.reset()})),a.addEventListener("submit",(function(e){e.preventDefault(),_.textContent=d.value.trim(),y.textContent=m.value.trim(),t(p)}))})();